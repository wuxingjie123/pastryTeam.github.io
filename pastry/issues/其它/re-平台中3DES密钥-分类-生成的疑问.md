1. 关于3DES在平台中的分类:

- `1.1 平台中 原生3DES密钥的分类`
    - `1.1.1 会话协商的3DES密钥`
        - 保存位置:
            - 客户端保存在内存中;
            - 服务端保存在内容中;
        - 生成时间：
            - 会话时
        - 生命周期：	
            - 一次会话
        - 用途：
            - 加密普通网络请求
            - 加密密码键盘
        - 组成：
            - 客户端随机数：客户端的通用唯一识别码（UUID）
            - 服务器随机数：服务端的通用唯一识别码（UUID）
            - 服务器SessionID：

    - `1.1.2 客户端使用UUID生成3DES密钥`
        - 保存位置：
            - 本地加密的文件中；（加密使用的密钥是服务器下发的UUIDKEY混淆后的3DES密钥）
        - 生成时间：
            - 程序启动
        - 生命周期：
            - 从程序安装到卸载
        - 用途：
            - 本地存储加解密

    - `1.1.3 客户端license密钥生成器`
        
        - 用途：
            - 生成随机数，混淆html的文件名
            - 生成随机数，混淆xml文件内容
            - 生成3DES密钥，html文件解密

- `1.2 平台中 前置服务器 3DES密钥的分类`

    - `1.2.1 会话协商的3DES密钥`
        
        - 用途：
            - 加密普通网络请求（等同于1.1.1）
            - 加密密码键盘（等同于1.1.1）

- `1.3 平台中 打包工具 3DES密钥的分类`

    - `1.3.1 打包工具license密钥生成器（等同于1.1.3）`
        
        - 用途：
            - 生成随机数，混淆html的文件名
            - 生成随机数，混淆xml文件内容
            - 生成3DES密钥，html文件加密

2. 关于3DES在平台中的生成方式
	
- `2.1 针对 会话协商的3DES密钥`
    
    - 生成方式：
        - 截取客户端随机数的3-11间的字节
        - 截取服务器随机数的3-11间的字节
        - 截取sessionId的删除最后1位的后8位的字节,作为3DES的密钥

- `本地存储加解密3DES密钥生成方式`
    
    - 生成方式：
        - 服务器下发UUIDKEY的 字符串A(UUIDKEY在服务器段所有的用户使用同一个，并且这个UUIDKEY是固定不变的。目的是将b中的描述 )
        - 获取 客户端UUID 字符串B(该字符串每次都变化,所以在程序第一次启动的时候，会使用 服务器的UUIDKEY 进行加密保存到本地)
        - 对字符串A 分别截取0-7，8-15，16-23 作为 客户端UUID（字符串B）加解密的 3DES密钥
        - 将 客户端UUID（字符串B）通过3DES密钥加密保存到系统钥匙链中。（目的：为了保证下次程序启动的时候，使用同一个客户端UUID。）
        - 对 客户端UUID（字符串B） 进行混淆处理得到 字符串C
        - 对 字符串C 分别截取指定的字节，作为最终文件加解密使用的3DES密钥

> 疑问：最终使用的3DES密钥 是UUID，那么，将设备ID再使用服务器的UUIDKEY 加密保存到系统钥匙链中的意义是什么？

> 回复：为了应用卸载之后能够再次使用。

- `针对 1.1.3 生成随机数，混淆html的文件名`
    - 生成方式：
        
        - 使用 SHA1 算法计算字符串 html 的 hash值=Hash1
          使用 SHA1 算法计算字符串 24 的 hash值=Hash2
          使用 SHA1 算法计算文件ptframework_license内容 的 hash值 = Hash3
        
        - 对这三个hash值进行混淆处理，合并为一个 字符串A，将 字符串A 追加到 html 文件名后面 获取 字符串B

        - 对 字符串B 进行 MD5 计算，获取混淆后的html文件名
		
> 疑问：理解是否正确？

- `针对 1.1.3 生成随机数，混淆xml文件内容`
    - 生成方式：
        
        - 使用 SHA1 算法计算字符串 xml 的 hash值=Hash1
          使用 SHA1 算法计算字符串 24 的 hash值=Hash2
          使用 SHA1 算法计算文件ptframework_license内容 的 hash值 = Hash3
        
        - 对这三个hash值进行混淆处理，合并为一个 字符串A，将 字符串A 追加到 xml 文件内容后面 获取 字符串B
        
        - 对 字符串B 进行 MD5 计算 获取 hash值，保存到 xml 节点，准备验签使用
		
> 疑问：理解是否正确？

- `针对 1.1.3 生成3DES密钥，html文件解密`
    - 生成方式：
        - 使用 SHA1 算法计算字符串 html 的 hash值=Hash1
	       使用 SHA1 算法计算字符串 24 的 hash值=Hash2
	       使用 SHA1 算法计算文件ptframework_license内容 的 hash值 = Hash3
        - 对这三个hash值进行混淆处理，合并为一个 字符串A
        
        - 对 字符串C 分别截取指定的字节，作为html文件加解密使用的3DES密钥
	
> 疑问：理解是否正确？

> 回复：
1、关于本地存储使用的密钥混淆方法，可以根据不同客户进行重写混淆方法。
2、如果本地存储密钥被破解，采用强制更新客户端的方式来弥补。
